= Demo Generating Animations
:source-highlighter: highlight.js


This is a simple Ren'Py demonstration of automatically generating an animation
based on png frames in a subdirectory of the game directory.

The demo is playable, but the meat of the project is
link:game/animations.rpy[animations.rpy].

This method is originally inspired by 
link:https://www.reddit.com/r/RenPy/comments/vhgn1h/comment/id7frau/?utm_source=share&utm_medium=web3x&utm_name=web3xcss&utm_term=1&utm_content=share_button[this Reddit post]
by Blue_Budgies.

== Gimme the Code

. Make a subdirectory to contain the animation frames:
+
[source, shell]
----
mkdir game/images/animation
----

. Name your animation frames with the same name with an incrementing number at
  the end:
+
[source]
----
./frame01.png
./frame02.png
./frame03.png
./frame04.png
./frame05.png
----

. Put this in your code somewhere:
+
[source, python]
----
init python:
    def generate_animation(directory, fps = 30, looping = False):
        from uuid import uuid4
        animation_parts = []
        pause = 1.0/fps
        for path in renpy.list_files():
            if path.startswith(directory):
                if path[path.rindex(".")+1:].lower() == "png":
                    animation_parts.append(path)
                    animation_parts.append(pause)
        if not looping:
            renpy.image("clear_solid_last_animation_frame", Solid("#ffffff00"))
            animation_parts.append("clear_solid_last_animation_frame")
        image_name = str(uuid4())
        renpy.image(image_name, Animation(*animation_parts))
        return image_name
----

. Now you can generate an animation!
+
[source, renpy]
----
image my_animation = generate_animation("images/animation")
----

== Credits

* Original inspiration: link:https://www.reddit.com/r/RenPy/comments/vhgn1h/comment/id7frau/?utm_source=share&utm_medium=web3x&utm_name=web3xcss&utm_term=1&utm_content=share_button[Blue_Budgies on Reddit]
* Explosion frames: https://www.pngegg.com/en/png-nvowz

== License

Published under the link:license[MIT License] which practically says, go nuts,
use it however you want.